---
title: "Предложить статью"
<!-- date: 2022-07-22T23:54:39+03:00 -->
draft: false
---

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
<link href='https://fonts.googleapis.com/css?family=Roboto:400' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="./main.css">

<div class="container">
    <div class="log-form">
        <!-- <h2>Заполните форму</h2> -->
        <form class="telegram-form">
          <input type="text" name="name" placeholder="Имя"/>
          <input type="text" name="nick" placeholder="Никнейм"/>
          <input type="text" name="email" placeholder="Email"/>
          <textarea name="message" placeholder="Введите сообщение..."></textarea>
          <label for="file" class="file-label"><i class="bi bi-paperclip"></i> Добавить фото</label>
          <input type="file" name="file" id="file">
          <button type="submit" class="btn">отправить</button>
        </form>
      </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- <script src="main.js"></script> -->

<scrip type="text/javascript">
    $('.telegram-form').on('submit', function (event) {

        event.stopPropagation();
        event.preventDefault();
    
        let form = this,
            submit = $('.submit', form),
            data = new FormData(),
            files = $('input[type=file]')
    
    
        $('.submit', form).val('Отправка...');
        $('input, textarea', form).attr('disabled','');
    
        data.append( 'Имя', 		$('[name="name"]', form).val() );
        data.append( 'Никнкйм', 		$('[name="nick"]', form).val() );
        data.append( 'Email', 		$('[name="email"]', form).val() );
        data.append( 'Сообщение', 		$('[name="message"]', form).val() );
        data.append( 'Файл', 		$('[name="file"]', form).val() );
       
    
        files.each(function (key, file) {
            let cont = file.files;
            if ( cont ) {
                $.each( cont, function( key, value ) {
                    data.append( key, value );
                });
            }
        });
        
        $.ajax({
            url: 'form.php',
            type: 'POST',
            data: data,
            cache: false,
            dataType: 'json',
            processData: false,
            contentType: false,
            xhr: function() {
                let myXhr = $.ajaxSettings.xhr();
    
                if ( myXhr.upload ) {
                    myXhr.upload.addEventListener( 'progress', function(e) {
                        if ( e.lengthComputable ) {
                            let percentage = ( e.loaded / e.total ) * 100;
                                percentage = percentage.toFixed(0);
                            $('.submit', form)
                                .html( percentage + '%' );
                        }
                    }, false );
                }
    
                return myXhr;
            },
            error: function( jqXHR, textStatus ) {
                // Тут выводим ошибку
            },
            complete: function() {
                window.location.href = "./sended.html"
                form.reset() 
            }
        });
    
        return false;
    });
</scrip>